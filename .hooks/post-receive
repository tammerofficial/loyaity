#!/bin/bash

# Git Post-Receive Hook
# ÙŠØªÙ… ØªØ´ØºÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ git push

set -e

# Colors
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}ðŸš€ Auto-deployment triggered...${NC}"

# Navigate to project directory
cd /path/to/your/project || exit 1

# Run auto deployment
if [ -f "auto-deploy.sh" ]; then
    ./auto-deploy.sh
    echo -e "${GREEN}âœ… Deployment completed successfully!${NC}"
else
    echo "Warning: auto-deploy.sh not found"
    
    # Fallback deployment
    composer install --no-dev --optimize-autoloader --no-interaction
    php artisan migrate --force
    php artisan config:cache
    php artisan route:cache
    php artisan view:cache
    chmod -R 755 storage bootstrap/cache
    
    echo -e "${GREEN}âœ… Basic deployment completed!${NC}"
fi